{"version":3,"file":"main.bundle.js","mappings":"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","sources":["webpack://keksobooking/./source/js/formwork.js","webpack://keksobooking/webpack/bootstrap","webpack://keksobooking/./source/js/util.js","webpack://keksobooking/./source/js/server.js","webpack://keksobooking/./source/js/main.js"],"sourcesContent":["const type = document.querySelector('#type');\nconst price = document.querySelector('#price');\n\ntype.addEventListener('click', function () {\n  switch (type.value) {\n    case 'bungalow':\n      price.min = 0;\n      break;\n    case 'flat':\n      price.min = 1000;\n      break;\n    case 'house':\n      price.min = 5000;\n      break;\n    case 'palace':\n      price.min = 10000;\n      break;\n  }\n});\n\nconst timein = document.querySelector('#timein');\nconst timeout = document.querySelector('#timeout');\n\ntimein.addEventListener('change', function () {\n  switch (timein.value) {\n    case '12:00':\n      timeout.value = '12:00';\n      break;\n    case '13:00':\n      timeout.value = '13:00';\n      break;\n    case '14:00':\n      timeout.value = '14:00';\n      break;\n  }\n});\n\ntimeout.addEventListener('change', function () {\n  switch (timeout.value) {\n    case '12:00':\n      timein.value = '12:00';\n      break;\n    case '13:00':\n      timein.value = '13:00';\n      break;\n    case '14:00':\n      timein.value = '14:00';\n      break;\n  }\n});\n\nconst roomNumber = document.querySelector('#room_number');\nconst capacity = document.querySelector('#capacity').children;\n\nroomNumber.addEventListener('click', function () {\n  for (let i = 0; i < capacity.length; i++) {\n    capacity[i].setAttribute('disabled', '');\n  }\n  switch (roomNumber.value) {\n    case '1':\n      capacity[2].removeAttribute('disabled');\n      break;\n    case '2':\n      capacity[1].removeAttribute('disabled');\n      capacity[2].removeAttribute('disabled');\n      break;\n    case '3':\n      capacity[0].removeAttribute('disabled');\n      capacity[1].removeAttribute('disabled');\n      capacity[2].removeAttribute('disabled');\n      break;\n    case '100':\n      capacity[3].removeAttribute('disabled');\n      break;\n  }\n});\n\nconst fileChooser = document.querySelector('#avatar');\nconst preview = document.querySelector('.ad-form-header__preview').children;\nconst fileChooserImages = document.querySelector('#images');\nconst previewImages = document.querySelector('.ad-form__photo');\nconst FILE_TYPES = ['gif', 'jpg', 'jpeg', 'png'];\n\n\nfileChooser.addEventListener('change', () => {\n  const file = fileChooser.files[0];\n  const fileName = file.name.toLowerCase();\n\n  const matches = FILE_TYPES.some((it) => {\n    return fileName.endsWith(it);\n  });\n\n  if (matches) {\n    const reader = new FileReader();\n\n    reader.addEventListener('load', () => {\n      preview[0].src = reader.result;\n    });\n\n    reader.readAsDataURL(file);\n  }\n});\n\nfileChooserImages.addEventListener('change', () => {\n  const file = fileChooserImages.files[0];\n  const fileName = file.name.toLowerCase();\n\n  const matches = FILE_TYPES.some((it) => {\n    return fileName.endsWith(it);\n  });\n\n  if (matches) {\n    const reader = new FileReader();\n\n    reader.addEventListener('load', () => {\n      previewImages.insertAdjacentHTML('beforeend', '  <img src=\"' + reader.result + '\" alt=\"Аватар пользователя\" width=\"45\" height=\"40\">');\n    });\n\n    reader.readAsDataURL(file);\n  }\n});\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","function getRandomInt(min, max) {\n  if(min >= max){\n    let min2 = min;\n    min = max;\n    max = min2;\n  }\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\n// Замыкание\n(function() {\n  /**\n   * Корректировка округления десятичных дробей.\n   *\n   * @param {String}  type  Тип корректировки.\n   * @param {Number}  value Число.\n   * @param {Integer} exp   Показатель степени (десятичный логарифм основания корректировки).\n   * @returns {Number} Скорректированное значение.\n   */\n  function decimalAdjust(type, value, exp) {\n    // Если степень не определена, либо равна нулю...\n    if (typeof exp === 'undefined' || +exp === 0) {\n      return Math[type](value);\n    }\n    value = +value;\n    exp = +exp;\n    // Если значение не является числом, либо степень не является целым числом...\n    if (isNaN(value) || !(typeof exp === 'number' && exp % 1 === 0)) {\n      return NaN;\n    }\n    // Сдвиг разрядов\n    value = value.toString().split('e');\n    value = Math[type](+(value[0] + 'e' + (value[1] ? (+value[1] - exp) : -exp)));\n    // Обратный сдвиг\n    value = value.toString().split('e');\n    return +(value[0] + 'e' + (value[1] ? (+value[1] + exp) : exp));\n  }\n\n  // Десятичное округление к ближайшему\n  if (!Math.round10) {\n    Math.round10 = function(value, exp) {\n      return decimalAdjust('round', value, exp);\n    };\n  }\n})();\n\nfunction getRandomfloor(min, max, sim) {\n  if(min >= max){\n    let min2 = min;\n    min = max;\n    max = min2;\n  }\n  return Math.round10(((Math.random() * (max - min + 1)) + min), -sim);\n}\n\n\nexport { getRandomInt, getRandomfloor};\n","const getData = (onSuccess, onError) => {\n  fetch('https://23.javascript.pages.academy/keksobooking/data')\n    .then((response) => response.json())\n    .then((data) => {\n      onSuccess(data);\n    })\n    .catch((err) => {\n      onError(err);\n    });\n};\n\nconst sendData = (onSuccess, onFail, body) => {\n  fetch(\n    'https://23.javascript.pages.academy/keksobooking',\n    {\n      method: 'POST',\n      body,\n    },\n  )\n    .then((response) => {\n      if (response.ok) {\n        onSuccess();\n      } else {\n        onFail('Не удалось отправить форму. Попробуйте ещё раз');\n      }\n    })\n    .catch(() => {\n      onFail('Не удалось отправить форму. Попробуйте ещё раз');\n    });\n};\n\nconst showAlert = (message) => {\n  const alertContainer = document.createElement('div');\n  alertContainer.style.zIndex = 100;\n  alertContainer.style.position = 'absolute';\n  alertContainer.style.left = 0;\n  alertContainer.style.top = 0;\n  alertContainer.style.right = 0;\n  alertContainer.style.padding = '10px 3px';\n  alertContainer.style.fontSize = '30px';\n  alertContainer.style.textAlign = 'center';\n  alertContainer.style.backgroundColor = 'red';\n\n  alertContainer.textContent = message;\n\n  document.body.append(alertContainer);\n\n  setTimeout(() => {\n    alertContainer.remove();\n  }, 5000);\n}\n\nexport {getData, sendData, showAlert};\n","import './formwork.js';\nimport './util.js';\nimport {getData, sendData, showAlert} from'./server.js';\n\n/* global L:readonly */\n/* global _:readonly */\n\nconst adForm = document.querySelector('.ad-form');\nconst adFildsetsForm = adForm.querySelectorAll('fieldset');\nconst mapForm = document.querySelector('.map__filters');\nconst mapFildsetsForm = mapForm.querySelectorAll('fieldset');\nconst mapSelectsForm = mapForm.querySelectorAll('select');\nconst address = document.querySelector('#address');\n\nconst isEscEvent = (evt) => {\n  return evt.key === 'Escape' || evt.key === 'Esc';\n};\n\nadForm.addEventListener('submit', (evt) => {\n  evt.preventDefault();\n\n  sendData(\n    () => {\n      adForm.reset();\n      const success = document.querySelector('#success').content.querySelector('.success');\n      const successClon = success.cloneNode(true);\n      document.body.append(successClon);\n      document.addEventListener('keydown', (evt) => {\n        if (isEscEvent(evt)) {\n          successClon.classList.add('hidden');\n        }\n      });\n      document.addEventListener('click', () => {\n        successClon.classList.add('hidden');\n      });\n      marker.setLatLng([35.68397, 139.75]);\n    },\n    () => {\n      const error = document.querySelector('#error').content.querySelector('.error');\n      const errorClon = error.cloneNode(true);\n      const errorButton = errorClon.querySelector('.error__button');\n      document.body.append(errorClon);\n      document.addEventListener('keydown', (evt) => {\n        if (isEscEvent(evt)) {\n          errorClon.classList.add('hidden');\n        }\n      });\n      errorButton.addEventListener('click', () => {\n        errorClon.classList.add('hidden');\n      });\n    },\n    new FormData(evt.target),\n  );\n});\n\nconst closeAdForm = () => {\n  adForm.classList.add('ad-form--disabled');\n  adFildsetsForm.forEach((fildset) => {\n    fildset.setAttribute('disabled', '');\n  });\n\n  mapForm.classList.add('map__filters--disabled');\n  mapFildsetsForm.forEach((fildset) => {\n    fildset.setAttribute('disabled', '');\n  });\n  mapSelectsForm.forEach((select) => {\n    select.setAttribute('disabled', '');\n  });\n};\n\ncloseAdForm();\n\nconst openAdForm = () => {\n  adForm.classList.remove('ad-form--disabled');\n  adFildsetsForm.forEach((fildset) => {\n    fildset.removeAttribute('disabled');\n  });\n\n  mapForm.classList.remove('map__filters--disabled');\n  mapFildsetsForm.forEach((fildset) => {\n    fildset.removeAttribute('disabled');\n  });\n  mapSelectsForm.forEach((select) => {\n    select.removeAttribute('disabled');\n  });\n};\n\nwindow.addEventListener('load', () => {\n  openAdForm();\n});\n\n\nconst map = L.map('map-canvas')\n  .setView({\n    lat: 35.68379,\n    lng: 139.75021,\n  }, 12);\n\nL.tileLayer(\n  'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n  {\n    attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n  },\n).addTo(map);\n\nconst mainPinIcon = L.icon({\n  iconUrl: 'img/main-pin.svg',\n  iconSize: [52, 52],\n  iconAnchor: [26, 52],\n});\n\nconst marker = L.marker(\n  {\n    lat: 35.68379,\n    lng: 139.75021,\n  },\n  {\n    draggable: true,\n    icon: mainPinIcon,\n  },\n);\n\nconst pinIcons = L.icon({\n  iconUrl: 'img/pin.svg',\n  iconSize: [40, 40],\n  iconAnchor: [20, 40],\n});\n\nconst housingType = document.querySelector('#housing-type');\nconst housingPrice = document.querySelector('#housing-price');\nconst housingRooms = document.querySelector('#housing-rooms');\nconst housingGuests = document.querySelector('#housing-guests');\nconst housings = [housingType, housingPrice, housingRooms, housingGuests]\n\nconst filterWifi = document.querySelector('#filter-wifi');\nconst filterDishwasher = document.querySelector('#filter-dishwasher');\nconst filterParking = document.querySelector('#filter-parking');\nconst filterWasher = document.querySelector('#filter-washer');\nconst filterElevator = document.querySelector('#filter-elevator');\nconst filterConditioner = document.querySelector('#filter-conditioner');\nconst filters = [filterWifi, filterDishwasher, filterParking, filterWasher, filterElevator, filterConditioner]\n\nconst markerGroup = L.layerGroup().addTo(map);\n\nconst popapCreater = (data) => {\n\n  markerGroup.clearLayers();\n\n  const getPoppapFilterRank= (advertisements) => {\n\n    const offer = advertisements.offer;\n\n    let rank = 0;\n\n    if (housingType.value === offer.type) {\n      rank += 1;\n    }\n    switch (housingPrice.value) {\n      case 'any':\n        break;\n      case 'middle':\n        rank += 1;\n        break;\n      case 'low':\n        rank += 1;\n        break;\n      case 'high':\n        rank += 1;\n        break;\n    }\n    switch (housingRooms.value) {\n      case '1':\n        rank += 1;\n        break;\n      case '2':\n        rank += 1;\n        break;\n      case '3':\n        rank += 1;\n        break;\n    }\n    switch (housingGuests.value) {\n      case '1':\n        rank += 1;\n        break;\n      case '2':\n        rank += 1;\n        break;\n      case '0':\n        rank += 1;\n        break;\n    }\n    filters.forEach((filter) => {\n      if (filter.checked) {\n        rank += 1;\n      }\n    })\n    return rank;\n  }\n\n  const getPoppapRank= (advertisements) => {\n\n    const offer = advertisements.offer;\n\n    let rank = 0;\n\n    if (housingType.value === offer.type) {\n      rank += 1;\n    }\n    switch (housingPrice.value) {\n      case 'any':\n        break;\n      case 'middle':\n        if (offer.price > 10000 && offer.price < 50000) {\n          rank += 1;\n        }\n        break;\n      case 'low':\n        if (offer.price < 10000) {\n          rank += 1;\n        }\n        break;\n      case 'high':\n        if (offer.price > 50000) {\n          rank += 1;\n        }\n        break;\n    }\n    switch (housingRooms.value) {\n      case '1':\n        if (offer.rooms === 1) {\n          rank += 1;\n        }\n        break;\n      case '2':\n        if (offer.rooms === 2) {\n          rank += 1;\n        }\n        break;\n      case '3':\n        if (offer.rooms === 3) {\n          rank += 1;\n        }\n        break;\n    }\n    switch (housingGuests.value) {\n      case '1':\n        if (offer.guests === 1) {\n          rank += 1;\n        }\n        break;\n      case '2':\n        if (offer.guests === 2) {\n          rank += 1;\n        }\n        break;\n      case '0':\n        if (offer.guests === 0) {\n          rank += 1;\n        }\n        break;\n    }\n\n    filters.forEach((filter) => {\n      const features = offer.features;\n      if (filter.checked && features != undefined) {\n        features.forEach((feature) => {\n          if (filter.value === feature) {\n            rank += 1;\n          }\n        })\n      }\n    })\n\n    return rank;\n  };\n\n  const comparePoppaps = (offerA, offerB) => {\n    const rankA = getPoppapRank(offerA);\n    const rankB = getPoppapRank(offerB);\n\n    return rankB - rankA;\n  }\n\n  let massiveRank = []\n  for (let i = 0; i < data.length; i++) {\n    massiveRank.push(getPoppapFilterRank(data[i]));\n  }\n\n  const popap = document.querySelector('#card').content.querySelector('.popup');\n\n  data.slice().sort(comparePoppaps).slice(0, 10).forEach((advertisements) => {\n    if (getPoppapRank(advertisements) === Math.max(...massiveRank)) {\n      const popapClon = popap.cloneNode(true);\n      const offer = advertisements.offer;\n      popapClon.querySelector('.popup__title').textContent = offer.title;\n      popapClon.querySelector('.popup__text--address').textContent = offer.address;\n      popapClon.querySelector('.popup__text--price').textContent = offer.price + ' ₽/ночь';\n      const  offerType = () => { switch (offer.type) {\n        case 'palace':\n          return 'Дворец';\n        case 'flat':\n          return 'Квартира';\n        case 'house':\n          return 'Дом';\n        case 'bungalow':\n          return 'Бунгало';\n      }};\n      popapClon.querySelector('.popup__type').textContent = offerType();\n      popapClon.querySelector('.popup__text--capacity').textContent = offer.rooms +' комнаты для ' + offer.guests +' гостей';\n      popapClon.querySelector('.popup__text--time').textContent = 'Заезд после '+ offer.checkin + ', выезд до ' + offer.checkout;\n      const popupFeatures = popapClon.querySelector('.popup__features');\n      for (let index = 0; index < 6; index++) {\n        popupFeatures.removeChild(popapClon.querySelector('.popup__feature'));\n      }\n      const features = offer.features;\n      if ( features != undefined ) {\n        for (let index = 0; index < features.length; index++) {\n          popupFeatures.insertAdjacentHTML('beforeend', '  <li class=\"popup__feature popup__feature--' + features[index] +'\"></li>');\n        }\n      }\n      popapClon.querySelector('.popup__description').textContent = offer.description;\n      const popupPhotos = popapClon.querySelector('.popup__photos');\n      popupPhotos.removeChild(popapClon.querySelector('.popup__photo'));\n      const photos = offer.photos;\n      if ( photos != undefined ) {\n        for (let index = 0; index < photos.length; index++) {\n          popupPhotos.insertAdjacentHTML('beforeend', '  <img src=\"' + photos[index] + '\" class=\"popup__photo\" width=\"45\" height=\"40\" alt=\"Фотография жилья\">');\n        }\n      }\n\n      const author = advertisements.author;\n      popapClon.querySelector('.popup__avatar').src = author.avatar;\n\n      const Location = advertisements.location;\n      const marker = L.marker({\n        lat: Location.lat,\n        lng: Location.lng,\n      },\n      {\n        icon: pinIcons,\n      },\n      );\n      marker.addTo(markerGroup).bindPopup(popapClon);\n    }\n  });\n};\n\ngetData((advertisement) => {\n  popapCreater(advertisement);\n  housings.forEach((housing) => {\n    housing.addEventListener('change', _.debounce(\n      () => popapCreater(advertisement),\n      400,\n    ));\n  });\n  filters.forEach((filter) => {\n    filter.addEventListener('click', _.debounce(\n      () => popapCreater(advertisement),\n      400,\n    ));\n  });\n},\n() => {\n  showAlert('Не удалось загрузить данные. Попробуйте ещё раз');\n});\n\nmarker.addTo(map);\n\naddress.value = '35.68397, 139.75'\nmarker.on('moveend', (evt) => {\n  const LatLng = evt.target.getLatLng()\n  address.value =  Math.round10(LatLng.lat , -5) + ', ' + Math.round10(LatLng.lng , -5);\n});\n\n"],"names":["type","document","querySelector","price","addEventListener","value","min","timein","timeout","roomNumber","capacity","children","i","length","setAttribute","removeAttribute","fileChooser","preview","fileChooserImages","previewImages","FILE_TYPES","file","files","fileName","name","toLowerCase","some","it","endsWith","reader","FileReader","src","result","readAsDataURL","insertAdjacentHTML","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","Math","round10","exp","isNaN","NaN","toString","split","decimalAdjust","adForm","adFildsetsForm","querySelectorAll","mapForm","mapFildsetsForm","mapSelectsForm","address","isEscEvent","evt","key","onSuccess","onFail","body","preventDefault","reset","successClon","content","cloneNode","append","classList","add","marker","setLatLng","errorClon","errorButton","FormData","target","fetch","method","then","response","ok","catch","forEach","fildset","select","window","remove","map","L","setView","lat","lng","tileLayer","attribution","addTo","mainPinIcon","icon","iconUrl","iconSize","iconAnchor","draggable","pinIcons","housingType","housingPrice","housingRooms","housingGuests","housings","filters","markerGroup","layerGroup","popapCreater","data","clearLayers","getPoppapFilterRank","advertisements","offer","rank","filter","checked","getPoppapRank","rooms","guests","features","feature","massiveRank","push","popap","slice","sort","offerA","offerB","rankA","max","popapClon","textContent","title","offerType","checkin","checkout","popupFeatures","index","removeChild","description","popupPhotos","photos","author","avatar","Location","location","bindPopup","onError","advertisement","housing","_","debounce","message","alertContainer","createElement","style","zIndex","position","left","top","right","padding","fontSize","textAlign","backgroundColor","setTimeout","showAlert","json","err","on","LatLng","getLatLng"],"sourceRoot":""}